<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENI-Enchères</title>
    <link rel="icon" type="image/x-icon" th:href="@{/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" />
</head>

<body>
<div class="app-container">
    <header>
        <h1 class="uk-margin-remove">ENI-Enchères</h1>
    </header>
    <h2>Liste des enchères</h2>

    <div class="filtres">
        <div class="label">Filtres :</div>

        <div class="recherche">
            <input type="text" placeholder="Le nom de l'article contient">
            <button>Rechercher</button>
        </div>

        <div class="categorie">
            <span>Catégorie :</span>
            <select>
                <option selected>Toutes</option>
                <option>Informatique</option>
                <option>Ameublement</option>
                <option>Vêtement</option>
                <option>Sport & Loisirs</option>
            </select>
        </div>

            <div class="option-group">
                <div class="option">
                    <input type="radio" id="ventes" name="type">
                    <label for="ventes">Mes ventes</label>
                </div>
                <div class="checkbox-container">
                    <input type="checkbox" id="mesVentesEnCours">
                    <label for="mesVentesEnCours">mes ventes en cours</label>
                </div>
                <div class="checkbox-container">
                    <input type="checkbox" id="ventesNonDebutees">
                    <label for="ventesNonDebutees">ventes non débutées</label>
                </div>
                <div class="checkbox-container">
                    <input type="checkbox" id="ventesTerminees">
                    <label for="ventesTerminees">ventes terminées</label>
                </div>
            </div>
        </div>
    </div>

<div th:if="${encheres != null}" class="encheres-liste">
    <div th:each="enchere : ${encheres}" class="enchere">
        <div class="enchere-details">
            <div class="enchere-image">
                <div>X</div>
            </div>
            <div class="enchere-info">
                <a href="#" th:text="${enchere?.articleCible?.nomArticle}" class="enchere-nom">Nom de l'article</a>
                <div class="enchere-prix">Prix : <span th:text="${enchere?.montant_enchere}">200</span> points</div>

                <!-- Vérification que dateEnchere n'est pas nulle -->
                <div class="enchere-fin">Fin de l'enchère :
                    <span th:text="${enchere?.dateEnchere != null ? #temporals.format(enchere.dateEnchere, 'dd/MM/yyyy') : 'Non définie'}">01/01/2023</span>
                </div>

                <!-- Vérification de la chaîne complète -->
                <div class="enchere-vendeur">Vendeur :
                    <a href="#" th:text="${enchere?.articleCible?.vendeur?.pseudo}">vendeur</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenu affiché si la liste est vide -->
    <div th:if="${encheres.empty}" class="enchere">
        <div class="message">Aucune enchère n'est disponible pour le moment.</div>
    </div>
    </div>

    <!-- Afficher un message si encheres est null -->
    <div th:if="${encheres == null}" class="message">
        Erreur lors du chargement des enchères.
    </div>

    <div class="user-info">
        <!-- Si un utilisateur est connecté -->
        <div th:if="${utilisateurConnecte != null}">
            <div th:text="${utilisateurConnecte.pseudo} + ' est'">NineJea est</div>
            <div>connecté(e)</div>
        </div>
    </div>
</body>
</html>
